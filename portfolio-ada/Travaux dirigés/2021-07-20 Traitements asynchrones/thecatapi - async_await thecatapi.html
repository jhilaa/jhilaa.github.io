<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>Fonction asynchrone</title>
</head>
<body>
<body>
 <img src="" id="image" width="300px">
<script>
//var XMLHttpRequest = require("xmlhttprequest").XMLHttpRequest;
async function getData(url) {
    var req = new XMLHttpRequest();
    req.onreadystatechange = function() {
            if (req.readyState === 4) {
                if (req.status === 200) {
                    console.log("0 " +req.responseText);
                    return req.responseText;
                } else {
                    //console.log(req);
                }
            }
        }
    req.open('GET', url, true);
    req.send();
}
async function getCat() {
let cat;
let cat_array;
try {
    cat= getData ("https://api.thecatapi.com/v1/images/search?format=json");
    //document.getElementById("image").src=cat[0]['url']
    //console.log("2 " + cat);
    //cat_array=JSON.parse(cat);
    //console.log("3 " + cat_array);
    //console.log("4 " + cat_array[0]['url']);
    //console.log ("2 "+req.responseText)
}
catch(e) { await console.error ("2 -erreur");
            //document.getElementById("image").src=cat[0]['url']
        }
}
getCat();
</script>
</body>
</html>